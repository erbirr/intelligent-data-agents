{
	"info": {
		"_postman_id": "ida-microservice-collection",
		"name": "IDA Microservices - Intelligent Data Agents",
		"description": "Colecci칩n completa para probar el sistema de agentes IDA con Neo4j, PostgreSQL y Gemini LLM.\n\n**Caracter칤sticas:**\n- Orquestador inteligente con Gemini LLM\n- Agentes especializados para Neo4j y PostgreSQL\n- Configuraci칩n din치mica de conexiones\n- Consultas en lenguaje natural\n\n**Configuraci칩n:**\n1. Ajustar variables de entorno en la colecci칩n\n2. Probar endpoints de salud primero\n3. Configurar conexiones de bases de datos\n4. Ejecutar consultas inteligentes",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "ida-system"
	},
	"item": [
		{
			"name": "游낀 Sistema y Salud",
			"item": [
				{
					"name": "Health Check",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has healthy status\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.status).to.eql(\"healthy\");",
									"});",
									"",
									"pm.test(\"Service name is correct\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.service).to.eql(\"ida-microservice\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Endpoint de verificaci칩n de salud del sistema. Verifica que el servicio est칠 funcionando y muestra el estado de los agentes."
					},
					"response": []
				},
				{
					"name": "System Info",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has service info\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.service).to.exist;",
									"    pm.expect(jsonData.version).to.exist;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/system/info",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"system",
								"info"
							]
						},
						"description": "Informaci칩n detallada del sistema, configuraci칩n y endpoints disponibles."
					},
					"response": []
				},
				{
					"name": "Root Endpoint",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						},
						"description": "Endpoint ra칤z que proporciona informaci칩n b치sica y enlaces a documentaci칩n."
					},
					"response": []
				}
			],
			"description": "Endpoints para verificar el estado y configuraci칩n del sistema."
		},
		{
			"name": "游뱄 Estado de Agentes",
			"item": [
				{
					"name": "Agents Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has agents status\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('neo4j');",
									"    pm.expect(jsonData).to.have.property('postgres');",
									"    pm.expect(jsonData).to.have.property('orchestrator');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/agents/status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"agents",
								"status"
							]
						},
						"description": "Estado actual de todos los agentes del sistema (Neo4j, PostgreSQL, Orquestador)."
					},
					"response": []
				},
				{
					"name": "Agents Capabilities",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has capabilities\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('object');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/agents/capabilities",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"agents",
								"capabilities"
							]
						},
						"description": "Capacidades disponibles de cada agente del sistema."
					},
					"response": []
				}
			],
			"description": "Endpoints para monitorear el estado y capacidades de los agentes."
		},
		{
			"name": "游댋 Test de Conexiones",
			"item": [
				{
					"name": "Test Neo4j Connection",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success field\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('success');",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"// Guardar resultado en variable de entorno",
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"neo4j_connection_success\", jsonData.success);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"uri\": \"{{neo4j_uri}}\",\n    \"user\": \"{{neo4j_user}}\",\n    \"password\": \"{{neo4j_password}}\",\n    \"database\": \"{{neo4j_database}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/connections/neo4j/test",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"connections",
								"neo4j",
								"test"
							]
						},
						"description": "Prueba la conexi칩n a Neo4j con los par치metros especificados."
					},
					"response": []
				},
				{
					"name": "Test PostgreSQL Connection",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success field\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('success');",
									"    pm.expect(jsonData).to.have.property('message');",
									"});",
									"",
									"// Guardar resultado en variable de entorno",
									"var jsonData = pm.response.json();",
									"pm.environment.set(\"postgres_connection_success\", jsonData.success);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"host\": \"{{postgres_host}}\",\n    \"port\": {{postgres_port}},\n    \"database\": \"{{postgres_database}}\",\n    \"user\": \"{{postgres_user}}\",\n    \"password\": \"{{postgres_password}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/connections/postgres/test",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"connections",
								"postgres",
								"test"
							]
						},
						"description": "Prueba la conexi칩n a PostgreSQL con los par치metros especificados."
					},
					"response": []
				}
			],
			"description": "Endpoints para probar conexiones a bases de datos antes de usarlas."
		},
		{
			"name": "游 Consultas Inteligentes",
			"item": [
				{
					"name": "Consulta Simple",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has result and metadata\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('result');",
									"    pm.expect(jsonData).to.have.property('metadata');",
									"});",
									"",
									"pm.test(\"Execution time is present\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('execution_time');",
									"    pm.expect(jsonData.execution_time).to.be.a('number');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"쮺u치l es el estado de la conexi칩n?\",\n    \"context\": {\n        \"type\": \"health_check\",\n        \"priority\": \"high\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Consulta simple para probar el sistema b치sico."
					},
					"response": []
				},
				{
					"name": "Consulta Neo4j - Relaciones",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response indicates Neo4j was used\", function () {",
									"    var jsonData = pm.response.json();",
									"    // El metadata deber칤a indicar que se us칩 Neo4j",
									"    pm.expect(JSON.stringify(jsonData.metadata)).to.include('neo4j');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"Mu칠strame las relaciones entre usuarios y productos en el grafo\",\n    \"context\": {\n        \"type\": \"graph_analysis\",\n        \"focus\": \"relationships\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Consulta que deber칤a ser dirigida al agente Neo4j por contener palabras clave de grafos."
					},
					"response": []
				},
				{
					"name": "Consulta PostgreSQL - Agregaciones",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response indicates PostgreSQL was used\", function () {",
									"    var jsonData = pm.response.json();",
									"    // El metadata deber칤a indicar que se us칩 PostgreSQL",
									"    pm.expect(JSON.stringify(jsonData.metadata)).to.include('postgres');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"Dame el conteo total de registros y el promedio de ventas por mes\",\n    \"context\": {\n        \"type\": \"analytical_query\",\n        \"focus\": \"aggregations\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Consulta que deber칤a ser dirigida al agente PostgreSQL por contener palabras clave de agregaciones."
					},
					"response": []
				},
				{
					"name": "Consulta H칤brida - Multi-agente",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response indicates multiple agents were used\", function () {",
									"    var jsonData = pm.response.json();",
									"    var metadataStr = JSON.stringify(jsonData.metadata);",
									"    // Deber칤a haber evidencia de uso de m칰ltiples agentes",
									"    pm.expect(metadataStr).to.satisfy(function(str) {",
									"        return str.includes('neo4j') || str.includes('postgres') || str.includes('hybrid');",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"Combina los datos de relaciones del grafo con las estad칤sticas de la tabla de ventas\",\n    \"context\": {\n        \"type\": \"hybrid_analysis\",\n        \"sources\": [\"neo4j\", \"postgresql\"],\n        \"merge_strategy\": \"intelligent\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Consulta h칤brida que requiere datos de ambas bases de datos."
					},
					"response": []
				},
				{
					"name": "Consulta con Configuraci칩n Din치mica",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Custom configuration was used\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('metadata');",
									"    // Deber칤a haber alguna indicaci칩n del uso de configuraci칩n personalizada",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"Consulta los usuarios activos\",\n    \"context\": {\n        \"type\": \"dynamic_config_test\"\n    },\n    \"neo4j_config\": {\n        \"uri\": \"{{alt_neo4j_uri}}\",\n        \"user\": \"{{alt_neo4j_user}}\",\n        \"password\": \"{{alt_neo4j_password}}\"\n    },\n    \"postgres_config\": {\n        \"host\": \"{{alt_postgres_host}}\",\n        \"port\": {{alt_postgres_port}},\n        \"database\": \"{{alt_postgres_database}}\",\n        \"user\": \"{{alt_postgres_user}}\",\n        \"password\": \"{{alt_postgres_password}}\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Consulta que usa configuraciones de conexi칩n personalizadas para esta consulta espec칤fica."
					},
					"response": []
				}
			],
			"description": "Endpoints para consultas en lenguaje natural que son procesadas por el orquestador inteligente."
		},
		{
			"name": "游늵 Consultas de Ejemplo",
			"item": [
				{
					"name": "An치lisis de Productos Relacionados",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"쯈u칠 productos est치n m치s conectados entre s칤 y cu치les son las rutas de recomendaci칩n m치s cortas?\",\n    \"context\": {\n        \"type\": \"product_analysis\",\n        \"business_goal\": \"recommendation_system\"\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Ejemplo de an치lisis de relaciones de productos usando Neo4j."
					},
					"response": []
				},
				{
					"name": "M칠tricas de Ventas Mensuales",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"Mu칠strame las m칠tricas de ventas de los 칰ltimos 6 meses, agrupadas por mes y categor칤a de producto\",\n    \"context\": {\n        \"type\": \"sales_analysis\",\n        \"time_period\": \"6_months\",\n        \"grouping\": [\"month\", \"category\"]\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Ejemplo de an치lisis de m칠tricas usando PostgreSQL."
					},
					"response": []
				},
				{
					"name": "An치lisis de Comportamiento de Usuarios",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"Combina los patrones de navegaci칩n de usuarios del grafo con sus compras hist칩ricas para identificar segmentos de clientes\",\n    \"context\": {\n        \"type\": \"customer_segmentation\",\n        \"analysis_depth\": \"comprehensive\",\n        \"merge_data_sources\": true\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Ejemplo de an치lisis h칤brido que combina datos de ambas bases de datos."
					},
					"response": []
				},
				{
					"name": "Detecci칩n de Anomal칤as en Transacciones",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"query\": \"Encuentra transacciones inusuales bas치ndote en patrones de conexi칩n an칩malos y valores estad칤sticamente at칤picos\",\n    \"context\": {\n        \"type\": \"anomaly_detection\",\n        \"sensitivity\": \"high\",\n        \"algorithms\": [\"graph_analysis\", \"statistical_outliers\"]\n    }\n}"
						},
						"url": {
							"raw": "{{base_url}}/query",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"query"
							]
						},
						"description": "Ejemplo de detecci칩n de anomal칤as usando ambos sistemas."
					},
					"response": []
				}
			],
			"description": "Ejemplos de consultas reales que demuestran las capacidades del sistema."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script que se ejecuta antes de cada request",
					"console.log('Ejecutando consulta a:', pm.request.url.toString());",
					"",
					"// Agregar timestamp a headers para tracking",
					"pm.request.headers.add({",
					"    key: 'X-Request-Timestamp',",
					"    value: new Date().toISOString()",
					"});",
					"",
					"// Agregar identificador 칰nico para cada request",
					"pm.request.headers.add({",
					"    key: 'X-Request-ID',",
					"    value: pm.variables.replaceIn('{{$randomUUID}}')",
					"});"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script que se ejecuta despu칠s de cada response",
					"",
					"// Log b치sico de la respuesta",
					"console.log('Response status:', pm.response.status);",
					"console.log('Response time:', pm.response.responseTime + 'ms');",
					"",
					"// Verificaciones globales",
					"pm.test('Response time is acceptable', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(10000); // 10 segundos max",
					"});",
					"",
					"pm.test('Response has JSON content-type', function () {",
					"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
					"});",
					"",
					"// Guardar m칠tricas b치sicas en variables",
					"pm.environment.set('last_response_time', pm.response.responseTime);",
					"pm.environment.set('last_response_status', pm.response.status);"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string",
			"description": "URL base de la API IDA. Cambiar a la URL de Cloud Run en producci칩n."
		},
		{
			"key": "neo4j_uri",
			"value": "bolt://localhost:7687",
			"type": "string",
			"description": "URI de conexi칩n a Neo4j"
		},
		{
			"key": "neo4j_user",
			"value": "neo4j",
			"type": "string",
			"description": "Usuario de Neo4j"
		},
		{
			"key": "neo4j_password",
			"value": "tecnoandina",
			"type": "string",
			"description": "Contrase침a de Neo4j"
		},
		{
			"key": "neo4j_database",
			"value": "multiagentes",
			"type": "string",
			"description": "Base de datos de Neo4j"
		},
		{
			"key": "postgres_host",
			"value": "localhost",
			"type": "string",
			"description": "Host de PostgreSQL"
		},
		{
			"key": "postgres_port",
			"value": "5432",
			"type": "string",
			"description": "Puerto de PostgreSQL"
		},
		{
			"key": "postgres_database",
			"value": "multiagentes",
			"type": "string",
			"description": "Base de datos de PostgreSQL"
		},
		{
			"key": "postgres_user",
			"value": "tecnoandina",
			"type": "string",
			"description": "Usuario de PostgreSQL"
		},
		{
			"key": "postgres_password",
			"value": "tecnoandina",
			"type": "string",
			"description": "Contrase침a de PostgreSQL"
		},
		{
			"key": "alt_neo4j_uri",
			"value": "bolt://ida-neo4j:7687",
			"type": "string",
			"description": "URI alternativa de Neo4j para pruebas de configuraci칩n din치mica"
		},
		{
			"key": "alt_neo4j_user",
			"value": "neo4j",
			"type": "string",
			"description": "Usuario alternativo de Neo4j"
		},
		{
			"key": "alt_neo4j_password",
			"value": "alt_password",
			"type": "string",
			"description": "Contrase침a alternativa de Neo4j"
		},
		{
			"key": "alt_postgres_host",
			"value": "ida-postgres",
			"type": "string",
			"description": "Host alternativo de PostgreSQL"
		},
		{
			"key": "alt_postgres_port",
			"value": "5432",
			"type": "string",
			"description": "Puerto alternativo de PostgreSQL"
		},
		{
			"key": "alt_postgres_database",
			"value": "multiagentes",
			"type": "string",
			"description": "Base de datos alternativa de PostgreSQL"
		},
		{
			"key": "alt_postgres_user",
			"value": "tecnoandina",
			"type": "string",
			"description": "Usuario alternativo de PostgreSQL"
		},
		{
			"key": "alt_postgres_password",
			"value": "alt_password",
			"type": "string",
			"description": "Contrase침a alternativa de PostgreSQL"
		}
	]
}